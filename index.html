<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lomba MHQ - Musabaqoh Hifdzil Quran</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <h1>üèÜ Lomba MHQ</h1>
    <p class="subtitle">Musabaqoh Hifdzil Quran - Panel Juri/Panitia</p>
  </header>

  <main>
    <!-- VIEW: DAFTAR PAKET -->
    <div id="view-daftar" class="view">
      <div class="intro">
        <h2 style="text-align: center; margin-bottom: 0.5rem; color: var(--gold);">Pilih Paket Soal</h2>
        <p style="text-align: center; color: var(--text-muted); margin-bottom: 2rem;">
          Setiap peserta mendapatkan 1 paket soal yang berbeda
        </p>
      </div>
      
      <div class="paket-grid" id="paket-grid">
        <!-- Generated by JS -->
      </div>
    </div>

    <!-- VIEW: DETAIL SOAL -->
    <div id="view-soal" class="view" style="display: none;">
      <a href="#" class="back-btn" onclick="showDaftar(); return false;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Kembali ke Daftar Paket
      </a>

      <div class="soal-container" id="soal-container">
        <!-- Generated by JS -->
      </div>
    </div>
  </main>

  <footer>
    <p>üîí Dokumen Rahasia - Hanya untuk Juri/Panitia Lomba MHQ</p>
    <p>Juz 29 & 30 (Surat Al-Mulk s.d. An-Nas)</p>
  </footer>

  <script src="data/soal.js"></script>
  <script>
    // Render daftar paket
    function renderDaftarPaket() {
      const grid = document.getElementById('paket-grid');
      grid.innerHTML = '';
      
      for (let i = 1; i <= 30; i++) {
        const card = document.createElement('a');
        card.href = '#';
        card.className = 'paket-card';
        card.onclick = () => { showPaket(i); return false; };
        card.innerHTML = `
          <span class="number">${i}</span>
          <span class="label">Paket</span>
        `;
        grid.appendChild(card);
      }
    }

    // Show daftar paket
    function showDaftar() {
      document.getElementById('view-daftar').style.display = 'block';
      document.getElementById('view-soal').style.display = 'none';
      window.scrollTo(0, 0);
    }

    // Show detail paket
    function showPaket(id) {
      const paket = PAKET_SOAL.find(p => p.id === id);
      if (!paket) return;

      const container = document.getElementById('soal-container');
      
      let soalHTML = `
        <div class="paket-header">
          <h2>
            <span>üìã</span>
            Detail Soal
          </h2>
          <span class="paket-badge">Paket ${paket.id}</span>
        </div>
      `;

      paket.soal.forEach((soal, index) => {
        const jenisLabels = {
          'sambung': 'Sambung Ayat',
          'bacakan': 'Bacakan Ayat',
          'sambung-surat': 'Sambung Surat'
        };

        let contentHTML = '';
        
        // Potongan ayat untuk soal sambung
        if (soal.potonganAyat) {
          contentHTML += `
            <div class="ayat-box">
              ${soal.potonganAyat}
              ${soal.referensi ? `<span class="referensi">üìñ ${soal.referensi}</span>` : ''}
            </div>
          `;
        }

        // Info rentang ayat untuk soal bacakan
        if (soal.rentangAyat) {
          contentHTML += `
            <div style="background: var(--primary); padding: 0.75rem 1rem; border-radius: 8px; margin: 1rem 0; display: inline-block;">
              <strong style="color: var(--gold);">üìñ ${soal.rentangAyat}</strong>
            </div>
          `;
        }

        soalHTML += `
          <div class="soal-item">
            <div>
              <span class="soal-number">${soal.nomor}</span>
              <span class="soal-jenis">${jenisLabels[soal.jenis] || soal.jenis}</span>
            </div>
            <p class="soal-pertanyaan">${soal.pertanyaan}</p>
            ${contentHTML}
            
            <button class="toggle-btn" onclick="toggleKunci(this, ${paket.id}, ${index})">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
              </svg>
              <span class="btn-text">Tampilkan Kunci Jawaban</span>
            </button>
            
            <div class="kunci-jawaban" id="kunci-${paket.id}-${index}">
              <span class="kunci-label">üîë Kunci Jawaban</span>
              <p class="kunci-text">${soal.kunciJawaban}</p>
            </div>
          </div>
        `;
      });

      container.innerHTML = soalHTML;
      
      document.getElementById('view-daftar').style.display = 'none';
      document.getElementById('view-soal').style.display = 'block';
      window.scrollTo(0, 0);
    }

    // Toggle kunci jawaban
    function toggleKunci(btn, paketId, soalIndex) {
      const kunci = document.getElementById(`kunci-${paketId}-${soalIndex}`);
      const btnText = btn.querySelector('.btn-text');
      
      if (kunci.classList.contains('show')) {
        kunci.classList.remove('show');
        btn.classList.remove('active');
        btnText.textContent = 'Tampilkan Kunci Jawaban';
      } else {
        kunci.classList.add('show');
        btn.classList.add('active');
        btnText.textContent = 'Sembunyikan Kunci Jawaban';
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', renderDaftarPaket);
  </script>
</body>
</html>